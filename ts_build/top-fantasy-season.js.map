{"version":3,"file":"top-fantasy-season.js","sourceRoot":"","sources":["../scrape/top-fantasy-season.js"],"names":[],"mappings":"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","sourcesContent":["// let osmosis = require('osmosis');\nvar path = require('path');\nvar app = require(path.resolve(__dirname, '../server/server'));\nvar osmosis = require('osmosis');\nvar loopback = require('loopback');\nvar _ = require('lodash');\n\nvar ScrapeUtility = require('./pro_fb_ref');\n\nlet limit = 300; //limit number of players to scrape\nlet pfr_id;\nlet teams;\n\n\ngetTeams();\n\n\nfunction getTeams() {\n  app.models.NflTeam.find().then((response) => {\n    teams = _.keyBy(response, 'abbr');\n    // console.log(teams);\n    getPlayers(); // next step is called after promise\n  })\n}\n\nfunction getTeamId(str) {\n  // console.log('team attempted', str);\n  let team = teams[ScrapeUtility.pfrTeam2Abbr(str)];\n  if (team == null) {\n    return null;\n  } else {\n    return team.id;\n  }\n}\n\nfunction getPlayers() {\n  osmosis.get('http://www.pro-football-reference.com/years/2016/fantasy.htm')\n    .find(`#fantasy > tbody > tr:not(.thead):limit(${limit})`)\n    .delay(2500)\n    .set({\n      'name': 'td[csk] > @csk',\n      'team': 'td[data-stat=\"team\"] > a',\n      'pos': 'td[data-stat=\"fantasy_pos\"]',\n      'gp': 'td[data-stat=\"g\"]',\n      'ps_cmp': 'td[data-stat=\"pass_cmp\"]',\n      'ps_att': 'td[data-stat=\"pass_att\"]',\n      'ps_yd': 'td[data-stat=\"pass_yds\"]',\n      'ps_td': 'td[data-stat=\"pass_td\"]',\n      \"int\": 'td[data-stat=\"pass_int\"]',\n      \"ru_att\": 'td[data-stat=\"rush_att\"]',\n      \"ru_yd\": 'td[data-stat=\"rush_yds\"]',\n      \"ru_td\": 'td[data-stat=\"rush_td\"]',\n      \"rec_tg\": 'td[data-stat=\"targets\"]',\n      \"rec\": 'td[data-stat=\"rec\"]',\n      \"rec_yd\": 'td[data-stat=\"rec_yds\"]',\n      \"rec_td\": 'td[data-stat=\"rec_td\"]',\n      \"fantasy_pts\": 'td[data-stat=\"fantasy_points\"]',\n      \"vbd\": 'td[data-stat=\"vbd\"]',\n      \"pfr_id\": 'td[data-append-csv] > @data-append-csv',\n    })\n    // .find(`td[csk]:limit(${limit}) > a`)\n    .follow('td[csk] > a')\n    .find('#meta')\n    .delay(2500)\n    .set({\n      'dob': 'span[itemprop=\"birthDate\"] > @data-birth',\n      'height': 'span[itemprop=\"height\"]',\n      'weight': 'span[itemprop=\"weight\"]',\n      'college': 'div:nth-child(2) > p > a[href^=\"/schools/\"][href$=\"/\"]',\n      'twitter': 'div:nth-child(2) > p > a[href*=\"twitter\"]',\n      'draft_year': 'div:nth-child(2) > p > a[href^=\"/years/\"][href$=\"draft.htm\"]'\n    })\n    .data((response) => {\n      createPlayer(response);\n      /*chain the rest after promises*/\n    })\n    .log(console.log)\n    .error(console.log)\n    .debug(console.log);\n}\n\n\nfunction parsePlayer(json) {\n  let player = {};\n  let name = ScrapeUtility.parseName(json.name)\n  player.first_name = name.first;\n  player.last_name = name.last;\n  player.position = json.pos;\n  player.pfr_id = json.pfr_id;\n  player.team_id = getTeamId(json.team);\n\n  return player;\n}\n\nfunction createPlayer(json) {\n  app.models.Player.create(parsePlayer(json)).then((response) => {\n    let playerId = parseInt(response.id);\n    console.log('---');\n    console.log('player_id: ', playerId);\n    console.log(`player name: ${response.first_name} ${response.last_name}`)\n    console.log('---');\n    createBio(json, playerId);\n    createSeason(json, playerId);\n    getWeeks(json.pfr_id, playerId);\n  });\n}\n\nfunction parseBio(json, playerId) {\n  // console.log('parseBio json', json);\n  let weight = json.weight ? json.weight.substring(0, 3) : null;\n  if (weight === 0) {\n    console.log(`why so skinny | playerId: ${playerId}, name: ${json.name}`)\n  }\n  let draft_year = json.draft_year ? json.draft_year.substring(0, 4) : null;\n  if (draft_year === 0) {\n    console.log(`why no draft year | playerId: ${playerId}, name: ${json.name}`)\n  }\n  let bio = {\n    dob: json.dob,\n    height: json.height,\n    weight,\n    college: json.college,\n    twitter: json.twitter,\n    draft_year,\n    player_id: playerId\n  }\n  return bio;\n}\n\nfunction createBio(json, playerId) {\n  app.models.PlayerBio.create(parseBio(json, playerId)).then((response) => {})\n}\n\nfunction parseStatToInt(str) {\n  if (str == null) {\n    return 0;\n  } else {\n    let parsed = parseInt(str);\n    if (isNaN(parsed)) {\n      return 0;\n    } else {\n      return parsed;\n    }\n  }\n}\n\nfunction parseBasicStats(json) {\n  return {\n    ps_cmp: parseStatToInt(json.ps_cmp),\n    ps_att: parseStatToInt(json.ps_att),\n    ps_yd: parseStatToInt(json.ps_yd),\n    ps_td: parseStatToInt(json.ps_td),\n    int: parseStatToInt(json.int),\n    ru_att: parseStatToInt(json.ru_att),\n    ru_yd: parseStatToInt(json.ru_yd),\n    ru_td: parseStatToInt(json.ru_td),\n    rec_tg: parseStatToInt(json.rec_tg),\n    rec: parseStatToInt(json.rec),\n    rec_yd: parseStatToInt(json.rec_yd),\n    rec_td: parseStatToInt(json.rec_td),\n    team_id: getTeamId(json.team)\n  };\n}\n\nfunction parseSeason(json, playerId) {\n  // console.log('start of parseSeason');\n  // console.log('json', json);\n  // console.log('playerId', playerId);\n  let season = {\n    gp: parseStatToInt(json.gp),\n    fantasy_pts: parseInt(json.fantasy_pts),\n    vbd: parseStatToInt(json.vbd),\n    player_id: playerId,\n    year: 2016 //notice this is not dynamic\n  }\n  _.assign(season, parseBasicStats(json))\n  // console.log('season object', season);\n  return season;\n}\n\nfunction createSeason(json, playerId) {\n  app.models.OffSeasonStat.create(parseSeason(json, playerId)).then((response) => {\n    // console.log('response for create season', response)\n  })\n}\n\nfunction getWeeks(pfr_id, playerId) {\n  osmosis.get(`http://www.pro-football-reference.com/players/${pfr_id.charAt(0)}/${pfr_id}/gamelog/`)\n    .find('#div_stats tbody tr:not(.thead)')\n    .set({\n      'year': 'td[data-stat=\"year_id\"]',\n      'date': 'td[data-stat=\"game_date\"]',\n      'week': 'td[data-stat=\"game_num\"]',\n      'team': 'td[data-stat=\"team\"]',\n      'opp_id': 'td[data-stat=\"opp\"]',\n      'ps_cmp': 'td[data-stat=\"pass_cmp\"]',\n      'ps_att': 'td[data-stat=\"pass_att\"]',\n      'ps_yd': 'td[data-stat=\"pass_yds\"]',\n      'ps_td': 'td[data-stat=\"pass_td\"]',\n      \"int\": 'td[data-stat=\"pass_int\"]',\n      \"ru_att\": 'td[data-stat=\"rush_att\"]',\n      \"ru_yd\": 'td[data-stat=\"rush_yds\"]',\n      \"ru_td\": 'td[data-stat=\"rush_td\"]',\n      \"rec_tg\": 'td[data-stat=\"targets\"]',\n      \"rec\": 'td[data-stat=\"rec\"]',\n      \"rec_yd\": 'td[data-stat=\"rec_yds\"]',\n      \"rec_td\": 'td[data-stat=\"rec_td\"]',\n      \"ret_td\": 'td[data-stat=\"kick_ret_td]',\n      \"2pt\": 'td[data-stat=\"two_pt_md\"]'\n    })\n    .data((response) => {\n      console.log(`start of week create | playerId: ${playerId}, year: ${response.year}, week: ${response.week}`);\n      createWeek(response, playerId);\n      // console.log('end of create week');\n    })\n    .log(console.log)\n    .error(console.log)\n    .debug(console.log);\n}\n\nfunction parseWeek(json, playerId) {\n  let week = {\n    player_id: playerId,\n    year: parseInt(json.year),\n    date: ScrapeUtility.convert2Date(json.date),\n    week: parseInt(json.week),\n    team: getTeamId(json.team),\n    opp_id: getTeamId(json.opp_id)\n  }\n  _.assign(week, parseBasicStats(json));\n  // console.log('parse week result', week);\n  return week;\n}\n\nfunction createWeek(json, playerId) {\n  app.models.OffWeekStat.create(parseWeek(json, playerId)).then((response) => {\n    // console.log('api response', response);\n  });;\n}\n"]}